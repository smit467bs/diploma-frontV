<div *ngIf="interview && form; else loader" class="form-container custom-scrollbar">
  <h3 class="interview-label">{{interview.label}}</h3>
  <form [formGroup]="form">
    <div class="questions">
      <ng-container *ngFor="let question of interview.questions; let questionIndex = index">

        <div [ngSwitch]="question.type" class="question form-question-border second-background"
             [ngClass]="getClasses(question.type)">

          <ng-container *ngSwitchCase="questionType.CHOICE_ONE">
            <label class="question-label">{{question.question}}</label>
            <mat-radio-group class="question-options answer" [formControlName]="question.id">
              <mat-radio-button class="example-margin"
                                *ngFor="let option of question.options"
                                [value]="option"
              >{{option}}</mat-radio-button>
            </mat-radio-group>
          </ng-container>

          <ng-container *ngSwitchCase="questionType.CHOICE_MANY">
            <label class="question-label">{{question.question}}</label>
            <div class="question-options answer" [formArrayName]="question.id">
              <mat-checkbox class="example-margin"
                            *ngFor="let option of question.options; let optionIndex = index"
                            [formControlName]="optionIndex"
              >{{option}}</mat-checkbox>
            </div>
          </ng-container>

          <ng-container *ngSwitchCase="questionType.SELECT_ONE">
            <label class="question-label">{{question.question}}</label>
            <mat-form-field class="answer">
              <mat-label>Choose an option</mat-label>
              <mat-select [formControlName]="question.id">
                <mat-option *ngFor="let option of question.options" [value]="option">{{option}}</mat-option>
              </mat-select>
            </mat-form-field>
          </ng-container>


          <ng-container *ngSwitchCase="questionType.TEXT">
            <label class="question-label">{{question.question}}</label>
            <mat-form-field class="full-width answer">
              <input matInput [formControlName]="question.id" [errorStateMatcher]="matcher" autocomplete="off"/>
            </mat-form-field>
          </ng-container>

          <ng-container *ngSwitchCase="questionType.LONG_TEXT">
            <label class="question-label">{{question.question}}</label>

            <mat-form-field appearance="fill" class="full-width answer">
              <textarea matInput rows="5" [formControlName]="question.id" [errorStateMatcher]="matcher" autocomplete="off"></textarea>
            </mat-form-field>
          </ng-container>

        </div>

      </ng-container>
    </div>

  </form>
</div>

<div *ngIf="isAdmin()" class="form-control">
  <button color="primary" mat-icon-button (click)="toggleCharts()">
    <mat-icon matTooltip="Toggle charts">donut_large</mat-icon>
  </button>
  <button color="primary" mat-icon-button (click)="downloadReport()">
    <mat-icon matTooltip="Download report">assignment_returned</mat-icon>
  </button>
</div>

<div class="form-button">
  <button
    mat-raised-button
    color="warn"
    [routerLink]="'/interviews'"
  >Cancel
  </button>
  <button
    mat-raised-button
    color="accent"
    (click)="submitForm()"
  >Save
  </button>
</div>


<ng-template #loader>
  <overlay-loader></overlay-loader>
</ng-template>
